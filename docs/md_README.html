<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alphabot: C++ Alphabot API for the Raspberry PI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Alphabot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">C++ Alphabot API for the Raspberry PI </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="robot.jpg" alt="alt tag"/>
</div>
<p>C++ class to control the basic functionality of the Alphabot (<a href="https://www.waveshare.com/wiki/AlphaBot">https://www.waveshare.com/wiki/AlphaBot</a>) with a Raspberry PI:</p>
<ul>
<li>PWM motor control</li>
<li>Distance sensor readings (digital and analogue)</li>
<li>Battery voltage</li>
<li>Wheel speed encoders (rotating flags)</li>
<li>IR sensor readings</li>
<li>10Hz sampling rate with callback</li>
</ul>
<h2>Prerequisites</h2>
<h3>pigpio</h3>
<p>The Raspberry PI hardware is accessed via the <code>pigpio</code> library. Install its package: </p><div class="fragment"><div class="line">apt-get install libpigpio-dev</div></div><!-- fragment --><h3>Timer library</h3>
<p>Install the timer library from: <a href="https://github.com/berndporr/cppTimer">https://github.com/berndporr/cppTimer</a></p>
<h3>ncurses</h3>
<p>The demo programs below display the sensor readings with the ncurses library. Install it with </p><div class="fragment"><div class="line">apt-get install libncurses-dev</div></div><!-- fragment --><h2>Building</h2>
<p>The built system is <code>cmake</code>. Just type: </p><div class="fragment"><div class="line">cmake .</div><div class="line">make</div></div><!-- fragment --><h2>Usage</h2>
<h3>Start/stop</h3>
<p>Start the communication with the robot: </p><div class="fragment"><div class="line">start()</div></div><!-- fragment --><p>Stop the communication: </p><div class="fragment"><div class="line">stop()</div></div><!-- fragment --><h3>Motor speed</h3>
<p>Setting the speeds of the left/right wheels: </p><div class="fragment"><div class="line">setLeftWheelSpeed(float speed);</div><div class="line">setRightWheelSpeed(float speed);</div></div><!-- fragment --><p> where speed is between -1 and +1.</p>
<h3>Get Collision sensor readings</h3>
<p>The digital functions are boolean values which are true if the distance sensor threshold (set with the potentiometer) has been reached: </p><div class="fragment"><div class="line">bool getCollisionLeft();</div><div class="line">bool getCollisionRight();</div></div><!-- fragment --><p>The analogue readings from the sensors from 0..1 can be read with: </p><div class="fragment"><div class="line">float getLeftDistance()</div><div class="line">float getRightDistance()</div></div><!-- fragment --><h3>Battery voltage</h3>
<p>The function <code>getBatteryLevel()</code> provides the voltage of the battery in volt.</p>
<h3>Speed encoders</h3>
<p>These are terrible encoders and really only reliable to detect if the wheel is spinning at all or not. Updates every 1/2 sec. </p><div class="fragment"><div class="line">bool getLeftWheelSpinning();</div><div class="line">bool getRightWheelSpinning();</div></div><!-- fragment --><h3>Infrared channels / general purpose ADC channels 0-4</h3>
<div class="fragment"><div class="line">float (&amp;getIR())[nIR]</div></div><!-- fragment --><p> returns a reference to the whole array of IR sensor readings normalised between 0..1.</p>
<h3>Callback</h3>
<p>Whenever a new set of analogue readings is available the callback <code>step</code> in <code>StepCallback</code> is called. It contains the reference to the Alphabot class itself so that one can read the different ADC values.</p>
<h2>Demo programs</h2>
<div class="image">
<img src="testIO.png" alt="alt tag"/>
</div>
<p><code>testIO</code> is a simple test program which displays the different senor readings and you can test the motors. It also shows how the callback is used to display the sensor readings.</p>
<p><code>testMotor</code> ramps up the motor speed and back again.</p>
<p><code>obstacleAvoid.cpp</code> implements a Braitenberg vehicle and it has an emergency stop if the digital readings from the collision sensors are triggered. This is an instructional example and needs to be tweaked. The fun begins here! :) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 11 2021 23:31:53 for Alphabot by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
